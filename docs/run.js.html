<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>run.js - Documentation</title>

    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="Base.html">Base</a><ul class='members'><li data-type='method'><a href="Base.html#avatar">avatar</a></li><li data-type='method'><a href="Base.html#id">id</a></li><li data-type='method'><a href="Base.html#username">username</a></li></ul></li><li><a href="Bot.html">Bot</a><ul class='methods'><li data-type='method'><a href="Bot.html#invite">invite</a></li><li data-type='method'><a href="Bot.html#owners">owners</a></li><li data-type='method'><a href="Bot.html#support">support</a></li></ul><ul class='members'><li data-type='method'><a href="Bot.html#approved">approved</a></li><li data-type='method'><a href="Bot.html#avatar">avatar</a></li><li data-type='method'><a href="Bot.html#bot">bot</a></li><li data-type='method'><a href="Bot.html#clientID">clientID</a></li><li data-type='method'><a href="Bot.html#github">github</a></li><li data-type='method'><a href="Bot.html#id">id</a></li><li data-type='method'><a href="Bot.html#isFeatured">isFeatured</a></li><li data-type='method'><a href="Bot.html#isVerified">isVerified</a></li><li data-type='method'><a href="Bot.html#isWebsiteBot">isWebsiteBot</a></li><li data-type='method'><a href="Bot.html#library">library</a></li><li data-type='method'><a href="Bot.html#longDescription">longDescription</a></li><li data-type='method'><a href="Bot.html#prefix">prefix</a></li><li data-type='method'><a href="Bot.html#serverCount">serverCount</a></li><li data-type='method'><a href="Bot.html#shortDescription">shortDescription</a></li><li data-type='method'><a href="Bot.html#username">username</a></li></ul></li><li><a href="Client.html">Client</a><ul class='methods'><li data-type='method'><a href="Client.html#checkVerif">checkVerif</a></li><li data-type='method'><a href="Client.html#checkVerifSelf">checkVerifSelf</a></li><li data-type='method'><a href="Client.html#edit">edit</a></li><li data-type='method'><a href="Client.html#fetchBot">fetchBot</a></li><li data-type='method'><a href="Client.html#fetchSelf">fetchSelf</a></li><li data-type='method'><a href="Client.html#fetchUser">fetchUser</a></li><li data-type='method'><a href="Client.html#fetchWidget">fetchWidget</a></li><li data-type='method'><a href="Client.html#fetchWidgetSelf">fetchWidgetSelf</a></li><li data-type='method'><a href="Client.html#setCount">setCount</a></li></ul></li><li><a href="ClientOptions.html">ClientOptions</a><ul class='members'><li data-type='method'><a href="ClientOptions.html#.default">default</a></li><li data-type='method'><a href="ClientOptions.html#botID">botID</a></li><li data-type='method'><a href="ClientOptions.html#client">client</a></li><li data-type='method'><a href="ClientOptions.html#log">log</a></li><li data-type='method'><a href="ClientOptions.html#token">token</a></li></ul></li><li><a href="FetchOptions.html">FetchOptions</a><ul class='members'><li data-type='method'><a href="FetchOptions.html#normal">normal</a></li><li data-type='method'><a href="FetchOptions.html#specified">specified</a></li></ul></li><li><a href="User.html">User</a><ul class='members'><li data-type='method'><a href="User.html#avatar">avatar</a></li><li data-type='method'><a href="User.html#bio">bio</a></li><li data-type='method'><a href="User.html#discriminator">discriminator</a></li><li data-type='method'><a href="User.html#id">id</a></li><li data-type='method'><a href="User.html#isAdmin">isAdmin</a></li><li data-type='method'><a href="User.html#isBanned">isBanned</a></li><li data-type='method'><a href="User.html#isMod">isMod</a></li><li data-type='method'><a href="User.html#isVerifiedDeveloper">isVerifiedDeveloper</a></li><li data-type='method'><a href="User.html#tag">tag</a></li><li data-type='method'><a href="User.html#user">user</a></li><li data-type='method'><a href="User.html#username">username</a></li><li data-type='method'><a href="User.html#website">website</a></li></ul></li><li><a href="WidgetFetchOptions.html">WidgetFetchOptions</a><ul class='members'><li data-type='method'><a href="WidgetFetchOptions.html#height">height</a></li><li data-type='method'><a href="WidgetFetchOptions.html#width">width</a></li></ul></li></ul>
</nav>

<div id="main">
    
    <h1 class="page-title">run.js</h1>
    
    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>const snekfetch = require('snekfetch');
const apiLink = 'https://botsfordiscord.com/api';
const ClientOptions = require('./structures/ClientOptions.js').ClientOptions;
const FetchOptions = require('./structures/FetchOptions.js').FetchOptions;
const Bot = require('./structures/Bot').Bot;
const User = require('./structures/User').User;
const WidgetFetchOptions = require('./structures/WidgetFetchOptions').WidgetFetchOptions;

class Client {
    /**
     * Initializes the API wrapper.
     * @param {ClientOptions} [options=ClientOptions.default] Client Options.
     */
    constructor(options = ClientOptions.default) {
        this.edit(options, true); // Note from the Developer: DO NOT TOUCH!!!!!!!
    }

    /**
     * @param {any} message The thing to console log.
     * @private
     */
    _log(message) {
        if (this.options.log) console.log(message);
    }

    /**
     * Post your server count to your bot. Bot ID is supplied ID from initialization.
     * @param {Number} [serverSize] The server count to supply. If you supply a valid client on initialization, supplying this value is unnecessary; Supplying a value overrides the auto value set.
     * @returns {Promise&lt;Object>} Returns a message.
     */

    setCount(serverSize) {
        if (!this.options.token) throw new ReferenceError('To post your server count, you must supply an API token on initialization.');
        if (!serverSize &amp;&amp; !this.options.client) throw new ReferenceError('serverSize must be supplied; Not needed if you supply a valid client on initialization.');
        if (this.options.client &amp;&amp; !serverSize) serverSize = this.options.client.guilds.size;
        if (typeof serverSize !== 'number') throw new TypeError('serverSize must be a number.');
        const data = {
            server_count: serverSize
        };
        return new Promise((resolve, reject) => {
            snekfetch.post(`${apiLink}/bot/${this.options.botID}`)
                .send(data)
                .set({ Authorization: this.options.token, 'Content-Type': 'application/json' })
                .then((body) => {
                    resolve(body.body);
                })
                .catch(reject);
        });
    }

    /**
     * Fetch a bot from the list.
     * @param {String} botID The bot ID to fetch
     * @param {FetchOptions} [options={}] Only supply if you want to get a specific value, etc. "verified" or "name" (Disclaimer: This does not detect non-existant values)
     * @returns {Promise&lt;Bot>} Returns the fetched bot data.
     */

    fetchBot(botID, options = {}) {
        if (!botID) throw new ReferenceError('The bot ID must be supplied.');
        if (typeof botID !== 'string') throw new TypeError('The bot ID must be a string.');
        if (botID.length !== 18) throw new SyntaxError('The bot ID must be exactly an 18-digit number-string thing');
        return new Promise((resolve, reject) => {
            snekfetch.get(`${apiLink}/bot/${botID}`)
                .then(response => {
                    const Options = new FetchOptions(options);
                    if (Options.normal) {
                        this._log(Options.specified ? response.body[Options.specified] : response.body);
                        resolve(Options.specified ? response.body[Options.specified] : response.body);
                    } else {
                        const BfdBot = new Bot(response.body);
                        this._log(Options.specified ? BfdBot[Options.specified] : BfdBot);
                        resolve(Options.specified ? BfdBot[Options.specified] : BfdBot);
                    }
                })
                .catch(reject);
        });
    }

    /**
     * Fetch a bot using the ID supplied on initialization.
     * @param {FetchOptions} [options={}] Only supply if you want to get a specific value, etc. "verified" or "name" (Disclaimer: This does not detect non-existant values)
     * @returns {Promise&lt;Bot>} Returns the fetched bot data.
     */

    fetchSelf(options = {}) {
        if (!this.options.botID) throw new ReferenceError('The botID must be supplied on initialization.');
        return new Promise((resolve, reject) => {
            this.fetchBot(this.options.botID, options)
                .then(resolve)
                .catch(reject);
        });
    }

    /**
     * Check if a bot is verified. Shorthand convenience function for this.fetchBot(botID, 'verified')
     * @param {String} botID I guess if you wanted to check if a bot was verified...you could use this...
     * @returns {Promise&lt;Boolean>} Returns true or false, depending if the bot is verified or not.
     */

    checkVerif(botID) {
        if (!botID) throw new ReferenceError('The options.botID must be supplied.');
        if (typeof botID !== 'string') throw new TypeError('The bot ID must be a string.');
        if (botID.length !== 18) throw new SyntaxError('The bot ID must be exactly an 18-digit number-string thing');
        return new Promise((resolve, reject) => {
            this.fetchBot(botID, { specified: 'isVerified' })
                .then(resolve)
                .catch(reject);
        });
    }

    /**
     * Check if your own bot is verified.
     * @returns {Promise&lt;Boolean>} Returns true or false, depending if the bot is verified or not.
     */
    checkVerifSelf() {
        if (!this.options.botID) throw new ReferenceError('The options.botID must be supplied.');
        return new Promise((resolve, reject) => {
            this.checkVerif(this.options.botID)
                .then(resolve)
                .catch(reject);
        });
    }

    /**
     * Fetch a user that has logged on to the list.
     * @param {String} userID The user ID to fetch.
     * @param {FetchOptions} [options={}] A specific thing to get, like
     * @returns {Promise&lt;User>} Returns the user data.
     */
    fetchUser(userID, options = {}) {
        if (!userID) throw new ReferenceError('The user ID must be supplied.');
        if (typeof userID !== 'string') throw new TypeError('The user ID must be a string.');
        if (userID.length !== 18) throw new SyntaxError('The user ID must be exactly an 18-digit number-string thing');
        return new Promise((resolve, reject) => {
            snekfetch.get(`${apiLink}/user/${userID}`)
                .then(response => {
                    const Options = new FetchOptions(options);
                    if (Options.normal) {
                        this._log(Options.specified ? response.body[Options.specified] : response.body);
                        resolve(Options.specified ? response.body[Options.specified] : response.body);
                    } else {
                        const BfdUser = new User(response.body);
                        this._log(Options.specified ? BfdUser[Options.specified] : BfdUser);
                        resolve(Options.specified ? BfdUser[Options.specified] : BfdUser);
                    }
                })
                .catch(reject);
        });
    }

    /**
     * Change a value of the object.
     * @param {ClientOptions} options Client Options for change.
     * @param {Boolean} preset Whether or not to have preset options.
     * @returns {this}
     * @example
     * console.log(Client.edit({ log: false }));
     */
    edit(options = ClientOptions.default, preset = false) {
        if (!options) throw new ReferenceError('options must be defined.');
        if (options !== Object(options) || options instanceof Array) throw new TypeError('options must be an object.');
        if (options.token &amp;&amp; typeof options.token !== 'string') throw new TypeError('options.token must be a string.');
        if (options.botID &amp;&amp; typeof options.botID !== 'string') throw new TypeError('options.botID must be a string.');
        if (options.log &amp;&amp; typeof options.log !== 'boolean') throw new TypeError('options.log must be a boolean value.');

        this.options = new ClientOptions(options, preset ? ClientOptions.default : this.options);

        return this;
    }

    /**
     * Fetch a widget of a bot on the list.
     * @param {String} botID The bot ID to fetch.
     * @param {WidgetFetchOptions} options Widget Fetch Options.
     * @returns {Promise&lt;Buffer>} The widget buffer.
     * @example
     * const fs = require('fs');
     *
     * Client.fetchWidget('463803888072523797')
     *  .then(widget => fs.writeFileSync('widget.jpeg', widget))
     *  .catch(console.log);
     */
    fetchWidget(botID, options = {}) {
        if (!botID) throw new ReferenceError('botID must be provided.');
        if (typeof botID !== 'string') throw new TypeError('botID must be a string.');
        if (options !== Object(options) || options instanceof Array) throw new TypeError('options must be an object.');

        return new Promise((resolve, reject) => {
            const Options = new WidgetFetchOptions(options);
            if (Options.width &lt; 400 || Options.height &lt; 180) console.warn('Any widgets with a size smaller than 400x180 may be distorted at a level.');
            snekfetch.get(`${apiLink}/bot/${botID}/widget${Options.width}${Options.height}`)
                .then(widget => {
                    this._log(widget.body);
                    resolve(widget.body);
                })
                .catch(reject);
        });
    }

    /**
     * Fetch the widget of the self bot.
     * @param {WidgetFetchOptions} options Widget Fetch Options
     * @returns {Promise&lt;Buffer>} The widget buffer.
     */
    fetchWidgetSelf(options = {}) {
        return new Promise((resolve, reject) => {
            this.fetchWidget(this.options.botID, options)
                .then(resolve)
                .catch(reject);
        });
    }
}

Client.APILink = apiLink;

module.exports = Client;</code></pre>
        </article>
    </section>




</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a> on Wed Oct 17 2018 18:04:26 GMT-0700 (PDT) using the Toast theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>
</body>
</html>
